<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ex_Checkbox</title>
<style>
    #table{
        width: 600px;
        border-collapse: collapse;
    }
    #table td{
        border: 1px solid #000000;
    }
    #table thead td{
        background-color: #adadad;
        padding: 10px 0;
        
    }
</style>
</head>
<body>
    <h1>jQuery를 활용한 전체선택</h1>
    <table id="table">
        <caption>체크박스 테이블</caption>
        <colgroup>
            <col width="30px"/>
            <col width="*"/>
        </colgroup>
        <thead>
            <tr>
                <td colspan="2">
                    <input type="checkbox" id="all" />
                    <label for="all">전체선택</label>
                </td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <input type="checkbox" name="chk" id="ch1">
                    <td>항목1</td>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" name="chk" id="ch2">
                    <td>항목2</td>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" name="chk" id="ch3">
                    <td>항목3</td>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" name="chk" id="ch4">
                    <td>항목4</td>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" name="chk" id="ch5">
                    <td>항목5</td>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" name="chk" id="ch6">
                    <td>항목6</td>
                </td>
            </tr>
        </tbody>
    </table>




    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script>
        $(function(){
            $("#all").bind("change",function(){
            //    console.log($(this).is(":checked"));
                let cb_ar = $("#table>tbody").find(":checkbox");

                let check = $(this).is(":checked");

                cb_ar.prop("checked", check);

                change_txt(check);

            });
            
            
            $("tbody").bind("change",function(){
                let check = true;
                $("tbody :checkbox").each(function(){
                    if(!this.checked){
                        check = false;
                        return;
                    }
                });
                $("#all").prop("checked",check);
                change_txt(check);
            });



        });

        function change_txt(check){
            if(check){
                $("#all").next().text("선택해제");
            } else {
                $("#all").next().text("전체선택");
            }
        }
        
    </script>
</body>
</html>