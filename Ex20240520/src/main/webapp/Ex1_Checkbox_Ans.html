<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ex1_Checkbox_Ans</title>
<style>
	table{
		border-collapse: collapse;
		width: 1000px;
	}
	table th, table td{
		border: 1px solid black;
		padding: 4px;
		text-align: center;
	}
</style>
</head>
<body>
	<div id="wrap">
		<header>
			<h1>Group Checkbox연습</h1>
		</header>
		<article>
			<table id="t1">
				<caption>그룹체크박스 테이블</caption>
				<colgroup>
					<col width="80px"/>
					<col width="200px"/>
					<col width="120px"/>
					<col width="120px"/>
					<col width="120px"/>
					<col width="120px"/>
					<col width="120px"/>
					<col width="*"/>
				</colgroup>
				<thead>
					<tr>
						<th>번호</th>
						<th>이름</th>
						<th><input type="checkbox" id="r0"/><span>그룹1</span></th>
						<th><input type="checkbox" id="r1"/><span>그룹2</span></th>
						<th><input type="checkbox" id="r2"/><span>그룹3</span></th>
						<th><input type="checkbox" id="r3"/><span>그룹4</span></th>
						<th><input type="checkbox" id="r4"/><span>그룹5</span></th>
						<th>비고</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>1</td>
						<td>마루치</td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td></td>
					</tr>
					<tr>
						<td>2</td>
						<td>이도</td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td></td>
					</tr>
					<tr>
						<td>3</td>
						<td>일지매</td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td></td>
					</tr>
					<tr>
						<td>4</td>
						<td>을불</td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td></td>
					</tr>
					<tr>
						<td>5</td>
						<td>창조리</td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td></td>
					</tr>
					<tr>
						<td>6</td>
						<td>이순신</td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td></td>
					</tr>
					<tr>
						<td>7</td>
						<td>송태섭</td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td></td>
					</tr>
				</tbody>
			</table>
		</article>
	</div>

	<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
	<script>
		/*
		$("#r0").click(function(){
			let ar = $("#t1 tbody td:nth-child(3)").find(":checkbox");
			ar.prop("checked",this.checked);
		});

		$("#r1").click(function(){
			let ar = $("#t1 tbody td:nth-child(4)").find(":checkbox");
			ar.prop("checked",this.checked);
		});

		*/

		$("#t1 thead input:checkbox").click(function(){
			// 클릭한 checkbox의 상위호환인 th태그를 얻어내어
			// 그 th태그의 index값을 알아내자.

			// let p = $(this).parent(); //th
			
			//상위로 가면서 th를 검색
			let p = $(this).closest("th");


			// console.log(p.prop("tagName")); //클릭한 체크박스
			// 감싸고있던 태그의 이름

			// 앞서 구해낸 부모태그(th)가 해당 행(tr)에서
			// 몇번째 요소인지 index값을 알아내자!

			let idx = $("#t1 thead tr th").index(p);
			// console.log(idx);

			// 구한 index값을 가지고 tbody에 있는 각 행에서
			// idx+1번에 있는 td안에 있는 checkbox들을 얻어낸다.
			let cb_ar = $("#t1 tbody td:nth-child("+(idx+1)+") input:checkbox");

			cb_ar.prop("checked",this.checked);
		});

		$("#t1 tbody input:checkbox").click(function(){

			

			let cb_ar = $("#t1 tbody td:nth-child("+(idx+1)+") input:checkbox");
			

		});

			

	</script>
</body>
</html>