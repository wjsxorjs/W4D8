<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ex1_Checkbox</title>
<style>
	table{
		border-collapse: collapse;
		width: 1000px;
	}
	table th, table td{
		border: 1px solid black;
		padding: 4px;
		text-align: center;
	}
</style>
</head>
<body>
	<div id="wrap">
		<header>
			<h1>Group Checkbox연습</h1>
		</header>
		<article>
			<table id="t1">
				<caption>그룹체크박스 테이블</caption>
				<colgroup>
					<col width="80px"/>
					<col width="200px"/>
					<col width="120px"/>
					<col width="120px"/>
					<col width="120px"/>
					<col width="120px"/>
					<col width="120px"/>
					<col width="*"/>
				</colgroup>
				<thead>
					<tr>
						<th>번호</th>
						<th>이름</th>
						<th><input type="checkbox" id="r0"/><span>그룹1</span></th>
						<th><input type="checkbox" id="r1"/><span>그룹2</span></th>
						<th><input type="checkbox" id="r2"/><span>그룹3</span></th>
						<th><input type="checkbox" id="r3"/><span>그룹4</span></th>
						<th><input type="checkbox" id="r4"/><span>그룹5</span></th>
						<th>비고</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>1</td>
						<td>마루치</td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td></td>
					</tr>
					<tr>
						<td>2</td>
						<td>이도</td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td></td>
					</tr>
					<tr>
						<td>3</td>
						<td>일지매</td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td></td>
					</tr>
					<tr>
						<td>4</td>
						<td>을불</td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td></td>
					</tr>
					<tr>
						<td>5</td>
						<td>창조리</td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td></td>
					</tr>
					<tr>
						<td>6</td>
						<td>이순신</td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td></td>
					</tr>
					<tr>
						<td>7</td>
						<td>송태섭</td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td><input type="checkbox" value="1"/></td>
						<td></td>
					</tr>
				</tbody>
			</table>
		</article>
	</div>

	<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
	<script>
		let check = false;

		$(function(){

			$("#r0").bind("change",function(){
            	check = $(this).is(":checked");
                checkCol(2);
            });
			$("#r1").bind("change",function(){
            	check = $(this).is(":checked");
                checkCol(3);
            });
			$("#r2").bind("change",function(){
            	check = $(this).is(":checked");
                checkCol(4);
            });
			$("#r3").bind("change",function(){
            	check = $(this).is(":checked");
                checkCol(5);
            });
			$("#r4").bind("change",function(){
            	check = $(this).is(":checked");
                checkCol(6);
            });

			$("#t1 tbody input:checkbox").click(function(){

				let p = $(this).closest("td");
				let idx = $("#t1 tbody tr td").index(p)%8;
				console.log(idx);

				let check = true;
				$("#t1 tbody tr td:nth-child("+(idx+1)+") input:checkbox").each(function(){
					if(!this.checked){
						check = false;
						return;
					}
				});
				let th_cb = $("#t1 thead th:nth-child("+(idx+1)+") input:checkbox");
				
				th_cb.prop("checked",check);
				

			});


		});

		function checkCol(num){
			let tr_ar = $("#t1>tbody").children();

			for(let i=0; i< tr_ar.length; i++){
				let td_ar = $(tr_ar[i]).children();
				// console.log(td_ar[num]);
				$(td_ar[num]).find(":checkbox").prop("checked", check);
			}
		}


	</script>
</body>
</html>